(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50591,e=>{e.v({card:"page-module___eeNZa__card",checkmark:"page-module___eeNZa__checkmark",errorTitle:"page-module___eeNZa__errorTitle",icon:"page-module___eeNZa__icon",page:"page-module___eeNZa__page",spin:"page-module___eeNZa__spin",spinner:"page-module___eeNZa__spinner",success:"page-module___eeNZa__success"})},84261,e=>{"use strict";var a=e.i(9749),t=e.i(73031),i=e.i(63573),n=e.i(11750),s=e.i(50591);function r(){let e=(0,t.useSearchParams)().get("redirect"),[r,c]=(0,i.useState)("loading"),[l,d]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{let a=(0,n.createClient)(),{data:{session:t}}=await a.auth.getSession();if(t)try{let a=await fetch("/api/auth/cli-token",{method:"POST",headers:{"Content-Type":"application/json"}});if(a.ok){let{token:t}=await a.json();e?window.location.href=`${e}?token=${t}`:c("success")}else throw Error("Failed to generate token")}catch{d("Failed to generate CLI token"),c("error")}else{c("authenticating");let{error:t}=await a.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/cli/callback${e?`?redirect=${encodeURIComponent(e)}`:""}`}});t&&(d(t.message),c("error"))}})()},[e]),(0,a.jsxs)("div",{className:s.default.card,children:[(0,a.jsx)("span",{className:s.default.icon,children:"ðŸ”"}),"loading"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"Authenticating CLI..."}),(0,a.jsx)("p",{children:"Please wait while we verify your credentials."}),(0,a.jsx)("div",{className:s.default.spinner})]}),"authenticating"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"Redirecting to GitHub..."}),(0,a.jsx)("p",{children:"You'll be redirected to GitHub to authenticate."}),(0,a.jsx)("div",{className:s.default.spinner})]}),"success"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:s.default.success,children:"Authentication Successful!"}),(0,a.jsx)("p",{children:"You can now close this window and return to your terminal."}),(0,a.jsx)("div",{className:s.default.checkmark,children:"âœ“"})]}),"error"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:s.default.errorTitle,children:"Authentication Failed"}),(0,a.jsx)("p",{children:l||"An unexpected error occurred."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]})]})}function c(){return(0,a.jsxs)("div",{className:s.default.card,children:[(0,a.jsx)("span",{className:s.default.icon,children:"ðŸ”"}),(0,a.jsx)("h1",{children:"Loading..."}),(0,a.jsx)("div",{className:s.default.spinner})]})}function l(){return(0,a.jsx)("div",{className:s.default.page,children:(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(c,{}),children:(0,a.jsx)(r,{})})})}e.s(["default",()=>l])}]);